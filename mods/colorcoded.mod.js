(()=>{var t={71:(t,e,o)=>{"use strict";o.r(e),o.d(e,{default:()=>a});var s=o(81),n=o.n(s),r=o(645),i=o.n(r)()(n());i.push([t.id,"#ingame_HUD_ColorSelector {\n    display: flex;\n    flex-direction: column;\n    gap: 0.3em;\n\n    position: absolute;\n    top: 50%;\n    right: 0;\n    z-index: 200;\n    transform: translate(100%, -50%);\n    transition: transform 0.3s ease-in;\n\n    background: #0006;\n    backdrop-filter: blur(calc(10px * var(--ui-scale)));\n    border-top-left-radius: calc(10px * var(--ui-scale));\n    border-bottom-left-radius: calc(10px * var(--ui-scale));\n    box-shadow: 0 0 0.8em #0004;\n\n    padding: calc(10px * var(--ui-scale));\n}\n\n#ingame_HUD_ColorSelector.visible {\n    transform: translate(0, -50%);\n}\n\n#ingame_HUD_ColorSelector canvas {\n    width: calc(32px * var(--ui-scale));\n    height: calc(32px * var(--ui-scale));\n}\n",""]);const a=i},645:t=>{"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var o="",s=void 0!==e[5];return e[4]&&(o+="@supports (".concat(e[4],") {")),e[2]&&(o+="@media ".concat(e[2]," {")),s&&(o+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),o+=t(e),s&&(o+="}"),e[2]&&(o+="}"),e[4]&&(o+="}"),o})).join("")},e.i=function(t,o,s,n,r){"string"==typeof t&&(t=[[null,t,void 0]]);var i={};if(s)for(var a=0;a<this.length;a++){var c=this[a][0];null!=c&&(i[c]=!0)}for(var d=0;d<t.length;d++){var l=[].concat(t[d]);s&&i[l[0]]||(void 0!==r&&(void 0===l[5]||(l[1]="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {").concat(l[1],"}")),l[5]=r),o&&(l[2]?(l[1]="@media ".concat(l[2]," {").concat(l[1],"}"),l[2]=o):l[2]=o),n&&(l[4]?(l[1]="@supports (".concat(l[4],") {").concat(l[1],"}"),l[4]=n):l[4]="".concat(n)),e.push(l))}},e}},81:t=>{"use strict";t.exports=function(t){return t[1]}},392:(t,e,o)=>{"use strict";var s={};o.r(s),o.d(s,{drawChunk:()=>d,drawWiresChunk:()=>l});const{globalConfig:n}=shapez,{AtlasSprite:r,ORIGINAL_SPRITE_SCALE:i,SpriteAtlasLink:a}=shapez;function c(t,e,o){const{StaticMapEntity:s,ColorCoded:n}=t.components;if(n.hasColorFilter()){o.colorCoded||(o.colorCoded=[]);const t=n.getColorFilter();o.colorCoded[t]||(o.colorCoded[t]=function(t,e){const o=t.linksByResolution[i],{w:s,h:n}=o,c=new r(t.spriteName),d=document.createElement("canvas");d.width=s,d.height=n;const l=d.getContext("2d");l.filter=e,t.draw(l,0,0,s,n);const h=new a({w:s,h:n,atlas:d,packOffsetX:0,packOffsetY:0,packedX:0,packedY:0,packedW:s,packedH:n});for(const t of["0.25","0.5","0.75"])c.linksByResolution[t]=h;return c}(o,t)),o=o.colorCoded[t]}s.drawSpriteOnBoundsClipped(e,o,2)}function d(t,[e,o]){const s=o.containedEntitiesByLayer.regular;for(const t of s){const o=t.components.StaticMapEntity.getSprite();if(o){if(this.drawnUids.has(t.uid))continue;this.drawnUids.add(t.uid),c(t,e,o)}}}function l(t,[e,o]){const s=new Set,r=o.wireContents;for(let t=0;t<n.mapChunkSize;++t)for(let o=0;o<n.mapChunkSize;++o){const n=r[o][t];if(n){if(s.has(n.uid))continue;s.add(n.uid);const t=n.components.StaticMapEntity.getSprite();t&&c(n,e,t)}}}const{enumColors:h,enumColorToShortcode:u,enumShortcodeToColor:p}=shapez,{Component:f}=shapez,{types:m}=shapez,g={};class C extends f{static getId(){return"ColorCoded"}static getSchema(){return{color:m.string}}constructor({color:t="u"}){super(),window.assert(!!p[t],"Invalid color: ",t),this.color=t}copyAdditionalStateTo(t){t.color=this.color}hasColorFilter(){return this.color!=u[h.uncolored]}getColorFilter(){return"brightness(0.8) sepia(100%) brightness(1.1) "+g[p[this.color]]}}const{ClickDetector:v}=shapez,{makeDiv:S}=shapez,{enumColorToShortcode:b}=shapez,{BaseHUDPart:y}=shapez,{DynamicDomAttach:w}=shapez,{COLOR_ITEM_SINGLETONS:z}=shapez;class k extends y{createElements(t){this.element=S(t,"ingame_HUD_ColorSelector");for(const t of Object.values(z)){const e=document.createElement("canvas");e.width=64,e.height=64;const o=e.getContext("2d");t.drawFullSizeOnCanvas(o,64),this.element.appendChild(e),new v(e,{}).click.add(this.repaintSelection.bind(this,t))}}initialize(){this.domAttach=new w(this.root,this.element,{attachClass:"visible",timeToKeepSeconds:.3})}repaintSelection(t){const e=this.root.hud.parts.massSelector;for(const o of e.selectedUids){const e=this.root.entityMgr.findByUid(o);e.components.ColorCoded&&(e.components.ColorCoded.color=b[t.color])}}update(){const t=this.root.hud.parts.massSelector;this.domAttach.update(t.selectedUids.size>0)}}const x={dark:{yellow:"#a3a168",cyan:"#709999",purple:"#996099"},light:{yellow:"#fffebf",cyan:"#bffffb",purple:"#ffbfff"}};var M=o(546),E=o.n(M);const _=JSON.parse('{"entry":"./index.js","name":"ColorCoded","description":"Allows you to enhance design of your factories by color coding.","version":"0.2.0b","id":"dengr1065:colorcoded","minimumGameVersion":">=1.5.0","settings":{"firstLaunch":true}}'),O="https://github.com/dengr1065/shapez.io-mods/issues".replace(/.+/,'<a href="$&">$&</a>'),I=["This mod might conflict with other installed mods","because it replaces core parts of the game with","own implementations. Some features might not work,","and the game may crash. ColorCoded attempts to","support buildings and colors from other mods, but","they must be registered in correct loading stages.","","The mod also has own HUD parts, so HUD from other","mods might get obstructed. If that's the case,","please let me know!","","Using ColorCoded on savegames created without it","is dangerous and can cause unexpected behavior.","Savegames created with this mod might also not","load without it. To avoid possible savegame","corruptions, make frequent backups.","",..._.version.endsWith("b")?["You're on a beta version of ColorCoded, expect some bugs."]:[],"Report issues to "+O,"Visit the mod loader Discord server for support."].join("<br>"),{Mod:T}=shapez,{StaticMapEntitySystem:D}=shapez,{COLOR_ITEM_SINGLETONS:L}=shapez,{gMetaBuildingRegistry:U}=shapez,{round2Digits:A}=shapez,{THEMES:B}=shapez,{enumColors:H}=shapez,{MainMenuState:j}=shapez;function R(t){if(t.color==H.white)return"grayscale(1) brightness(1.4)";const e=t.getBackgroundColorAsResource();if(!e)return"grayscale(1)";const o=function(t){const e=parseInt(t.slice(1),16),o=(e>>16)/255,s=(e>>8&255)/255,n=(255&e)/255,r=Math.max(o,s,n),i=Math.min(o,s,n);if(r==i)return null;let a=-1;const c=r-i;switch(r){case o:a=(s-n)/c+(s<n?6:0);break;case s:a=(n-o)/c+2;break;case n:a=(o-s)/c+4}return a/=6,Math.floor(360*a)}(e);return null==o?"grayscale(1)":`contrast(1.8) hue-rotate(${A(o-38)}deg)`}var F,N;F=class extends T{init(){this.modInterface.registerComponent(C);for(const t in s)this.modInterface.replaceMethod(D,t,s[t]);this.signals.appBooted.add(this.setMissingColors,this),this.signals.appBooted.add(this.setColorFilters,this),this.signals.appBooted.add(this.patchEntityComponents,this),this.signals.stateEntered.add(this.firstLaunch,this),this.signals.gameInitialized.add(this.registerHud,this),this.modInterface.registerCss(E())}setColorFilters(){for(const t of Object.values(L))g[t.color]=R(t)}patchEntityComponents(){for(const t of U.entries)this.modInterface.runAfterMethod(t.constructor,"setupEntityComponents",(function(t){t.addComponent(new C({}))}))}setMissingColors(){for(const t in x){const e=B[t].map.resources;for(const o in x[t])e[o]||(e[o]=x[t][o])}}firstLaunch(t){if(t instanceof j){if(!this.settings.firstLaunch)return;this.dialogs.showWarning("ColorCoded",I,["ok:good:timeout"]).ok.add((()=>{this.settings.firstLaunch=!1,this.saveSettings()}))}}registerHud(t){const e=new k(t);t.hud.parts.colorSelector=e,this.signals.hudElementInitialized.dispatch(e),e.createElements(document.body),e.initialize(),this.signals.hudElementFinalized.dispatch(e)}},(N=_).author="Даниїл Григор'єв <dengr1065@gmail.com>",delete N.entry,window.$shapez_registerMod(F,N)},546:(t,e,o)=>{var s=o(71);s&&s.__esModule&&(s=s.default),t.exports="string"==typeof s?s:s.toString()}},e={};function o(s){var n=e[s];if(void 0!==n)return n.exports;var r=e[s]={id:s,exports:{}};return t[s](r,r.exports,o),r.exports}o.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return o.d(e,{a:e}),e},o.d=(t,e)=>{for(var s in e)o.o(e,s)&&!o.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},o.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),o.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o(392)})();